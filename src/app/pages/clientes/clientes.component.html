<h2>Cadastro Cliente</h2>

<div *ngIf="!auth.verificaAdm()" class="d-flex justify-content-center">
  <div class="alert alert-warning text-center mt-4 w-25">
    <p><strong>Você não tem permissão para cadastrar novos clientes.</strong></p>
  </div>
</div>

<div class="container-cliente">
  <form [formGroup]="clienteForm" class="form" *ngIf="auth.verificaAdm()" >
    <div class="inputs">
      <div class="mb-3">
        <label for="nome" class="form-label" >Nome:</label>
        <input type="text" class="form-control textbox" id="nome" formControlName="nome" [ngClass]="validador ? '' : 'is-invalid'">
      </div>
      <div class="mb-3">
        <label for="telefone" class="form-label">Telefone:</label>
        <input type="text" class="form-control textbox" id="telefone" formControlName="telefone">
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" class="form-control textbox" id="email" formControlName="email" [ngClass]="validador ? '' : 'is-invalid'">
      </div>
      <div class="mb-3">
        <label for="cpf" class="form-label">CPF:</label>
        <input type="text" class="form-control textbox" id="cpf" formControlName="cpf">
      </div>
      <div class="mb-3">
        <label for="cep" class="form-label">CEP:</label>
        <input type="text" class="form-control textbox" id="cep" formControlName="cep">
      </div>
      <div class="mb-3">
        <label for="logradouro" class="form-label">Logradouro:</label>
        <input type="text" class="form-control textbox" id="logradouro" formControlName="logradouro">
      </div>
      <div class="mb-3">
        <label for="numero" class="form-label">Número:</label>
        <input type="text" class="form-control textbox" id="numero" formControlName="numero">
      </div>
      <div class="mb-3">
        <label for="bairro" class="form-label">Bairro:</label>
        <input type="text" class="form-control textbox" id="bairro" formControlName="bairro">
      </div>
      <div class="mb-3">
        <label for="cidade" class="form-label">Cidade:</label>
        <input type="text" class="form-control textbox" id="cidade" formControlName="cidade">
      </div>
      <div class="mb-3">
        <label for="estado" class="form-label">Estado:</label>
        <select name="estados" id="" formControlName="estado" class="form-select seleciona-estado" [ngClass]="validador ? '' : 'is-invalid'">
          <option [ngValue]="estadoSelect | pipeEstado" *ngFor="let estadoSelect of listaEstados; index as i">{{estadoSelect}}</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="complemento" class="form-label">Complemento:</label>
        <input type="string" class="form-control textbox" id="complemento" formControlName="complemento">
      </div>
    </div>
    <div *ngIf="id==-1" class="botao">
      <button type="submit" (click)="cadastrarCliente()" class="btn botao">Cadastrar</button>
    </div>
    <div *ngIf="id!=-1" class="botao">
      <button type="submit" (click)="editarCliente()" class="btn botao">Editar</button>
    </div>
  </form>
</div>
  <div #tabela class="tabela">
    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Email</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cliente of listaCliente; index as i" class="cliente">
          <td>{{cliente.nome}}</td>
          <td>{{cliente.email}}</td>
          <button class="remove" (click)="removeCliente(cliente.id)"  *ngIf="auth.verificaAdm()" [ngClass]="validador ? '' : 'is-invalid'">Remover</button>
          <button class="update" (click)="pushCliente(i)"  *ngIf="auth.verificaAdm()">Editar</button>
        </tr>
      </tbody>
    </table>
  </div>
